"use strict";const input=document.querySelector(".search__input"),btn=document.querySelector(".search__btn"),listResults=document.querySelector(".main__results"),favList=document.querySelector(".main__results-favorites");let favArr=[];const searchEngine=()=>{listResults.innerHTML="",fetch(`http://api.tvmaze.com/search/shows?q=${input.value}`).then(e=>e.json()).then(e=>{for(let t=0;t<e.length;t++){const n=document.createElement("li"),a=document.createElement("h3"),r=document.createElement("img");n.classList.add("result-item"),a.classList.add("result-item__title"),r.classList.add("result-item__image");const s=e[t].show.name,i=document.createTextNode(s);a.appendChild(i);const c=e[t].show.image,l="https://via.placeholder.com/210x295/D4D9D3/C28611/?text=TV";r.src=null===c?l:c.medium;const o=newObject(e[t].show.id,e[t].show.name,e[t].show.image);n.appendChild(r),n.appendChild(a),listResults.appendChild(n),n.addEventListener("click",selectFavorite),n.addEventListener("click",()=>{pushFav(o)}),n.addEventListener("click",()=>{paintFav(favArr)})}})};function enterKey(e){13===e.keyCode&&searchEngine()}function selectFavorite(){event.currentTarget.classList.toggle("selected__favorite")}function pushFav(e){if(null!==favArr){const t=favArr.findIndex(t=>t.id===e.id);-1===t?favArr.push(e):favArr.splice(t,1),saveArr(favArr)}else(favArr=[]).push(e),saveArr(favArr)}function newObject(e,t,n){return{id:e,name:t,image:n}}function paintFav(e){favList.innerHTML="";for(let t=0;t<e.length;t++){const n=document.createElement("li"),a=document.createElement("h4"),r=document.createElement("img");n.classList.add("fav-item"),a.classList.add("fav-item__title"),r.classList.add("fav-item__image");const s=e[t].name,i=document.createTextNode(s);a.appendChild(i);const c=e[t].image,l="https://via.placeholder.com/210x295/D4D9D3/C28611/?text=TV";r.src=null===c?l:c.medium,n.appendChild(r),n.appendChild(a),favList.appendChild(n)}}function saveArr(){localStorage.setItem("Array favoritos",JSON.stringify(favArr))}function getArr(){favArr=JSON.parse(localStorage.getItem("Array favoritos")),console.log(favArr),null!==favArr&&paintFav(favArr)}btn.addEventListener("click",searchEngine),window.addEventListener("keyup",enterKey),getArr(favArr);