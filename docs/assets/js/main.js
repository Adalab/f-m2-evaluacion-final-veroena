"use strict";const input=document.querySelector(".search__input"),btn=document.querySelector(".search__btn"),listResults=document.querySelector(".main__results"),favList=document.querySelector(".main__results-favorites"),favArr=[],searchEngine=()=>{listResults.innerHTML="",fetch(`http://api.tvmaze.com/search/shows?q=${input.value}`).then(e=>e.json()).then(e=>{for(let t=0;t<e.length;t++){const a=document.createElement("li"),n=document.createElement("h3"),s=document.createElement("img");a.classList.add("result-item"),n.classList.add("result-item__title"),s.classList.add("result-item__image");const r=e[t].show.name,i=document.createTextNode(r);n.appendChild(i);const c=e[t].show.image,l=`https://via.placeholder.com/210x295/ffffff/666666/?text=${r}`;s.src=null===c?l:c.medium;const o=newObject(e[t].show.id,e[t].show.name,e[t].show.image);a.appendChild(s),a.appendChild(n),listResults.appendChild(a),a.addEventListener("click",selectFavorite),a.addEventListener("click",()=>{pushFav(o)}),a.addEventListener("click",()=>{paintFav(favArr)})}})};function selectFavorite(){event.currentTarget.classList.toggle("selected__favorite")}function pushFav(e){const t=favArr.findIndex(t=>t.id===e.id);-1===t?favArr.push(e):favArr.splice(t,1),saveArr(favArr)}function newObject(e,t,a){return{id:e,name:t,image:a}}function paintFav(e){if(favList.innerHTML="",0===e.length)console.log("El array está vacío, maja");else for(let t=0;t<e.length;t++){const a=document.createElement("li"),n=document.createElement("h4"),s=document.createElement("img");a.classList.add("fav-item"),n.classList.add("fav-item__title"),s.classList.add("fav-item__image");const r=e[t].name,i=document.createTextNode(r);n.appendChild(i);const c=e[t].image,l=`https://via.placeholder.com/210x295/ffffff/666666/?text=${r}`;s.src=null===c?l:c.medium,a.appendChild(s),a.appendChild(n),favList.appendChild(a)}}function saveArr(e){localStorage.setItem("Array favoritos",JSON.stringify(e))}function getArr(e){paintArr(e)}btn.addEventListener("click",searchEngine);const savedFavArr=JSON.parse(localStorage.getItem("Array favoritos"));function paintArr(e){null===e?console.log("El array está vacío!"):paintFav(e)}getArr(savedFavArr);